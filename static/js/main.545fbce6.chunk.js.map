{"version":3,"sources":["components/newsListPage/NewsItem.js","api/api.js","redux/mainReducer.js","components/newsListPage/NewsList.js","components/newsPage/newsPage.js","App.js","reportWebVitals.js","redux/store.js","index.js"],"names":["NewsItem","index","size","start","news","to","pathname","state","data","className","style","height","transform","src","urlToImage","alt","title","description","api","axios","create","baseURL","proxy","ADD_NEWS","initialState","listSize","Math","ceil","window","innerHeight","newsItemSize","mainReducer","action","type","maxIndex","max","Object","keys","payload","map","item","mapDispatchToProps","getNews","startIndex","dispatch","page","get","then","articles","reduce","acc","addNews","catch","err","console","log","connect","itemSize","selectedIndex","parentRef","useRef","useLocation","list","useVirtual","estimateSize","useCallback","endIndex","virtualItems","length","useEffect","i","scrollToIndex","ref","totalSize","NewsPage","href","url","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.545fbce6.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst NewsItem = ({index, size, start, news}) => {\r\n  return (\r\n    <Link\r\n      to={{\r\n        pathname: `/news/${index}`,\r\n        state: {data: news, index}\r\n      }}\r\n      className='d-block list-item px-2 pb-2 list-item-border'\r\n      style={{\r\n        height: `${size}px`,\r\n        transform: `translateY(${start}px)`\r\n      }}\r\n    >\r\n      <div className='media hide-overflow'>\r\n        <div className='col-5 col-md-3 p-0'>\r\n          <img\r\n            className=\"d-flex align-self-start mr-3 w-100 h-100 py-2\"\r\n            src={news.urlToImage}\r\n            alt=''\r\n          />\r\n        </div>\r\n        <div className='col p-0 pl-2'>\r\n          <div className=\"media-body\">\r\n            <h5 className=\"mt-0\">\r\n              {news.title}\r\n            </h5>\r\n            <p className='d-none d-md-block'>\r\n              {news.description}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default NewsItem;","import axios from 'axios-https-proxy-fix';\r\n\r\nconst API_KEY = 'a072a71ffdf745449e81cc972606db86';\r\nconst PAGE_SIZE = 20;\r\n\r\nconst api = axios.create({\r\n  baseURL: 'https://newsapi.org/v2/',\r\n  proxy: false\r\n});\r\n\r\nexport const getNews = page => {\r\n  return api.get(`top-headlines?country=ru&apiKey=${API_KEY}&page=${page}&pageSize=${PAGE_SIZE}`);\r\n}","import * as api from '../api/api';\r\n\r\nconst ADD_NEWS = 'ADD_NEWS';\r\nconst NEWS_ITEM_SIZE = 150;\r\n\r\nconst initialState = {\r\n  news: {},\r\n  listSize: Math.ceil(window.innerHeight / NEWS_ITEM_SIZE),\r\n  newsItemSize: NEWS_ITEM_SIZE\r\n};\r\n\r\nconst mainReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_NEWS:\r\n      const maxIndex = Math.max(...Object.keys(action.payload).map(item => ++item));\r\n\r\n      return {\r\n        ...state,\r\n        news: {...state.news, ...action.payload},\r\n        listSize: maxIndex > state.listSize ? maxIndex : state.listSize\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const addNews = news =>\r\n  ({type: ADD_NEWS, payload: news})\r\n\r\nexport const getNews = (startIndex) => {\r\n  return dispatch => {\r\n    api.getNews(1).then(({data}) => {\r\n      const news = data.articles.reduce((acc, item, index) => {\r\n        acc[startIndex + index] = item;\r\n        return acc;\r\n      }, {});\r\n\r\n      dispatch(addNews(news));\r\n    }).catch(err => {\r\n      console.log(err)\r\n    });\r\n  }\r\n}\r\n\r\nexport default mainReducer;","import React, {useCallback, useEffect, useRef} from 'react';\r\nimport {useVirtual} from 'react-virtual';\r\nimport NewsItem from './NewsItem';\r\nimport {connect} from 'react-redux';\r\nimport {getNews} from '../../redux/mainReducer';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nconst NewsList = ({news, listSize, itemSize, getNews}) => {\r\n  const parentRef = useRef();\r\n  const {state} = useLocation();\r\n\r\n  const list = useVirtual({\r\n    size: listSize + 1,\r\n    parentRef,\r\n    estimateSize: useCallback(() => itemSize, [itemSize])\r\n  });\r\n\r\n  const endIndex = list.virtualItems[list.virtualItems.length - 1].index;\r\n  const startIndex = list.virtualItems[0].index;\r\n\r\n  useEffect(() => {\r\n    for (let i = startIndex; i <= endIndex; i++) {\r\n      if (news[i]) continue;\r\n      getNews(i);\r\n      break;\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [news, getNews, startIndex]);\r\n\r\n  useEffect(() => {\r\n    if (state && state.index) {\r\n      list.scrollToIndex(state.index);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [state]);\r\n\r\n  return (\r\n    <div\r\n      ref={parentRef}\r\n      className='row list-wrapper'\r\n    >\r\n      <div\r\n        className='list'\r\n        style={{height: `${list.totalSize}px`}}\r\n      >\r\n        {list.virtualItems.map(item => {\r\n          const {index, size, start} = item;\r\n\r\n          if (!news[index]) return null;\r\n\r\n          return <NewsItem\r\n            key={index}\r\n            index={index}\r\n            size={size}\r\n            start={start}\r\n            news={news[index]}\r\n          />;\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateTpProps = state => {\r\n  return {\r\n    news: state.news,\r\n    listSize: state.listSize,\r\n    itemSize: state.newsItemSize,\r\n    selectedIndex: state.selectedIndex\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  getNews\r\n};\r\n\r\nexport default connect(mapStateTpProps, mapDispatchToProps)(NewsList);","import React from 'react';\r\nimport {Link, useLocation} from 'react-router-dom';\r\n\r\nconst NewsPage = () => {\r\n  const {state} = useLocation();\r\n\r\n  return (\r\n    <div className='row py-2'>\r\n      <div className='col-12 col-md-4'>\r\n        <img\r\n          className='mh-100 mw-100'\r\n          src={state.data.urlToImage}\r\n          alt=''\r\n        />\r\n      </div>\r\n      <h2 className='col d-flex justify-content-center align-items-center'>\r\n        {state.data.title}\r\n      </h2>\r\n      <div className='col-12 ml-2'>\r\n        <p>\r\n          {state.data.description}\r\n        </p>\r\n        <p>\r\n          Источник: <a href={state.data.url}>{state.data.url}</a>\r\n        </p>\r\n        <Link to={{\r\n          pathname: '/news',\r\n          state: {index: state.index}\r\n        }}>\r\n          <button className='btn btn-outline-primary'>\r\n            &crarr; Назад\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NewsPage;","import React from 'react';\nimport NewsList from \"./components/newsListPage/NewsList\";\nimport './App.css';\nimport {Switch, Route, Redirect} from \"react-router-dom\";\nimport NewsPage from \"./components/newsPage/newsPage\";\n\nconst App = () => {\n  return (\n    <div className='container'>\n      <Switch>\n        <Route path='/news' exact>\n          <NewsList />\n        </Route>\n        <Route path='/news/:id' exact>\n          <NewsPage />\n        </Route>\n        <Redirect to='/news' />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, compose, createStore} from 'redux';\r\nimport mainReducer from './mainReducer';\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(mainReducer, composeEnhancers(\r\n  applyMiddleware(thunk)\r\n));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App/>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}