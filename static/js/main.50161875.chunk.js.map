{"version":3,"sources":["components/newsListPage/NewsItem.js","api/api.js","redux/mainReducer.js","components/newsListPage/NewsList.js","components/newsPage/newsPage.js","App.js","reportWebVitals.js","redux/store.js","index.js"],"names":["NewsItem","index","size","start","news","to","className","style","height","transform","src","urlToImage","alt","title","description","api","axios","create","baseURL","ADD_NEWS","initialState","listSize","Math","ceil","window","innerHeight","newsItemSize","getNews","startIndex","dispatch","get","then","data","reduce","acc","item","type","payload","addNews","mainReducer","state","action","maxIndex","max","Object","keys","map","mapDispatchToProps","connect","itemSize","selectedIndex","parentRef","useRef","useLocation","list","useVirtual","estimateSize","useCallback","endIndex","virtualItems","length","useEffect","i","scrollToIndex","ref","totalSize","id","useParams","href","url","pathname","App","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.50161875.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Link} from 'react-router-dom';\r\n\r\nconst imagePlaceholder = 'https://www.nahb.org/-/media/NAHB/Placeholders/Foundation/AX/16-x-9-Placeholder.png?h=346&w=615&la=en&hash=50769F5519AA357E830DE8F96E9E4D9B';\r\n\r\nconst NewsItem = ({index, size, start, news}) => {\r\n  return (\r\n    <Link\r\n      to={`/news/${index}`}\r\n      className='d-block list-item px-2 pb-2 list-item-border'\r\n      style={{\r\n        height: `${size}px`,\r\n        transform: `translateY(${start}px)`\r\n      }}\r\n    >\r\n      <div className='media hide-overflow'>\r\n        <div className='col-5 col-md-3 p-0'>\r\n          <img\r\n            className=\"d-flex align-self-start mr-3 w-100 h-100 py-2\"\r\n            src={news.urlToImage || imagePlaceholder}\r\n            alt=''\r\n          />\r\n        </div>\r\n        <div className='col p-0 pl-2'>\r\n          <div className=\"media-body\">\r\n            <h5 className=\"mt-0\">\r\n              {news.title}\r\n            </h5>\r\n            <p className='d-none d-md-block'>\r\n              {news.description}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport default NewsItem;","import axios from 'axios';\r\n\r\nconst api = axios.create({\r\n  baseURL: 'https://news-20e36.firebaseio.com/'\r\n});\r\n\r\nexport const getNews = () => {\r\n  return api.get('US/Business.json');\r\n}","import * as api from '../api/api';\r\n\r\nconst ADD_NEWS = 'ADD_NEWS';\r\nconst NEWS_ITEM_SIZE = 150;\r\nconst VISIBLE_ITEMS = Math.ceil(window.innerHeight / NEWS_ITEM_SIZE);\r\n\r\nconst initialState = {\r\n  news: {},\r\n  listSize: VISIBLE_ITEMS,\r\n  newsItemSize: NEWS_ITEM_SIZE\r\n};\r\n\r\nconst mainReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_NEWS:\r\n      const maxIndex = Math.max(...Object.keys(action.payload).map(item => ++item));\r\n\r\n      return {\r\n        ...state,\r\n        news: {...state.news, ...action.payload},\r\n        listSize: maxIndex > state.listSize ? maxIndex : state.listSize\r\n      };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport const addNews = news =>\r\n  ({type: ADD_NEWS, payload: news})\r\n\r\nexport const getNews = (startIndex) => {\r\n  return dispatch => {\r\n    api.getNews().then(({data}) => {\r\n      const news = data.reduce((acc, item, index) => {\r\n        acc[startIndex + index] = item;\r\n        return acc;\r\n      }, {});\r\n\r\n      dispatch(addNews(news));\r\n    });\r\n  }\r\n}\r\n\r\nexport default mainReducer;","import React, {useCallback, useEffect, useRef} from 'react';\r\nimport {useVirtual} from 'react-virtual';\r\nimport NewsItem from './NewsItem';\r\nimport {connect} from 'react-redux';\r\nimport {getNews} from '../../redux/mainReducer';\r\nimport {useLocation} from 'react-router-dom';\r\n\r\nconst NewsList = ({news, listSize, itemSize, getNews}) => {\r\n  const parentRef = useRef();\r\n  const {state} = useLocation();\r\n\r\n  const list = useVirtual({\r\n    size: listSize + 1,\r\n    parentRef,\r\n    estimateSize: useCallback(() => itemSize, [itemSize])\r\n  });\r\n\r\n  const endIndex = list.virtualItems[list.virtualItems.length - 1].index;\r\n  const startIndex = list.virtualItems[0].index;\r\n\r\n  useEffect(() => {\r\n    for (let i = startIndex; i <= endIndex; i++) {\r\n      if (news[i]) continue;\r\n      getNews(i);\r\n      break;\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [news, getNews, startIndex]);\r\n\r\n  useEffect(() => {\r\n    if (state && state.index) {\r\n      list.scrollToIndex(state.index);\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [state]);\r\n\r\n  return (\r\n    <div\r\n      ref={parentRef}\r\n      className='row list-wrapper'\r\n    >\r\n      <div\r\n        className='list'\r\n        style={{height: `${list.totalSize}px`}}\r\n      >\r\n        {list.virtualItems.map(item => {\r\n          const {index, size, start} = item;\r\n\r\n          if (!news[index]) return null;\r\n\r\n          return <NewsItem\r\n            key={index}\r\n            index={index}\r\n            size={size}\r\n            start={start}\r\n            news={news[index]}\r\n          />;\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateTpProps = state => {\r\n  return {\r\n    news: state.news,\r\n    listSize: state.listSize,\r\n    itemSize: state.newsItemSize,\r\n    selectedIndex: state.selectedIndex\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  getNews\r\n};\r\n\r\nexport default connect(mapStateTpProps, mapDispatchToProps)(NewsList);","import React, {useEffect} from 'react';\r\nimport {Link, useParams} from 'react-router-dom';\r\nimport {connect} from \"react-redux\";\r\nimport {getNews} from \"../../redux/mainReducer\";\r\n\r\nconst imagePlaceholder = 'https://www.nahb.org/-/media/NAHB/Placeholders/Foundation/AX/16-x-9-Placeholder.png?h=346&w=615&la=en&hash=50769F5519AA357E830DE8F96E9E4D9B';\r\n\r\nconst NewsPage = ({news, getNews}) => {\r\n  const {id} = useParams();\r\n\r\n  useEffect(() => {\r\n    if (!news[id]) getNews(+id);\r\n  }, [news, getNews, id]);\r\n\r\n  if (!news[id]) return null;\r\n\r\n  const data = news[id];\r\n\r\n  return (\r\n    <div className='row py-2'>\r\n      <div className='col-12 col-md-4'>\r\n        <img\r\n          className='mh-100 mw-100'\r\n          src={data.urlToImage || imagePlaceholder}\r\n          alt=''\r\n        />\r\n      </div>\r\n      <h2 className='col d-flex justify-content-center align-items-center'>\r\n        {data.title}\r\n      </h2>\r\n      <div className='col-12 ml-2'>\r\n        <p>\r\n          {data.description}\r\n        </p>\r\n        <p>\r\n          Источник: <a href={data.url}>{data.url}</a>\r\n        </p>\r\n        <Link to={{\r\n          pathname: '/news',\r\n          state: {index: id}\r\n        }}>\r\n          <button className='btn btn-outline-primary'>\r\n            &crarr; Назад\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    news: state.news\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  getNews\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsPage);","import React from 'react';\nimport NewsList from \"./components/newsListPage/NewsList\";\nimport './App.css';\nimport {Switch, Route, Redirect} from \"react-router-dom\";\nimport NewsPage from \"./components/newsPage/newsPage\";\n\nconst App = () => {\n  return (\n    <div className='container'>\n      <Switch>\n        <Route path='/news' exact>\n          <NewsList />\n        </Route>\n        <Route path='/news/:id' exact>\n          <NewsPage />\n        </Route>\n        <Redirect to='/news' />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import {applyMiddleware, compose, createStore} from 'redux';\r\nimport mainReducer from './mainReducer';\r\nimport thunk from \"redux-thunk\";\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(mainReducer, composeEnhancers(\r\n  applyMiddleware(thunk)\r\n));\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from 'react-redux';\nimport store from './redux/store';\nimport {HashRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <App/>\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}